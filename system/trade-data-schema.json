{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Trading System Data Schema",
    "description": "Standardized schema for all trade analysis data",
    "type": "object",
    "required": ["TRADE_DATA", "MARKET_BIAS", "COACHING_INSIGHTS"],
    "properties": {
      "TRADE_DATA": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["ticker", "direction", "confidence", "duration", "position_size", "trigger_type", "levels"],
          "properties": {
            "ticker": {
              "type": "string",
              "description": "Symbol/ticker of the instrument"
            },
            "direction": {
              "type": "string",
              "enum": ["LONG", "SHORT"],
              "description": "Trade direction"
            },
            "confidence": {
              "type": "string",
              "enum": ["BIG_IDEA", "HIGH", "MEDIUM", "LOW"],
              "description": "Conviction level of the trade idea"
            },
            "duration": {
              "type": "string",
              "enum": ["CASHFLOW", "SWING", "LONGTERM", "LOTTO"],
              "description": "Expected holding period"
            },
            "position_size": {
              "type": "string",
              "enum": ["FULL_DOUBLE", "FULL", "HALF", "QUARTER", "SMALL", "TINY"],
              "description": "Relative position size"
            },
            "trigger_type": {
              "type": "string",
              "enum": ["exact", "loose-trigger"],
              "description": "Whether entry is precise or conditional"
            },
            "levels": {
              "type": "object",
              "properties": {
                "entry": {
                  "oneOf": [
                    { "type": "number" },
                    { "type": "string" },
                    { "type": "array", "items": { "type": "number" } }
                  ],
                  "description": "Entry price level or condition"
                },
                "target": {
                  "oneOf": [
                    { "type": "number" },
                    { "type": "string" },
                    { "type": "array", "items": { "type": "number" } }
                  ],
                  "description": "Target price level(s)"
                },
                "stop": {
                  "oneOf": [
                    { "type": "number" },
                    { "type": "string" }
                  ],
                  "description": "Stop loss price level"
                }
              }
            },
            "timing": {
              "type": "string",
              "description": "Timing guidance (e.g., AT_OPEN, ON_PULLBACK)"
            },
            "context": {
              "type": "string",
              "description": "Reasoning or quote behind the trade idea"
            },
            "earnings": {
              "type": "object",
              "properties": {
                "upcoming": {
                  "type": "boolean",
                  "description": "Whether earnings are upcoming"
                },
                "date": {
                  "type": "string",
                  "description": "Earnings date if known"
                },
                "strategy": {
                  "type": "string",
                  "enum": ["pre", "post"],
                  "description": "Trade strategy relative to earnings"
                }
              }
            },
            "risk_reward": {
              "type": "object",
              "properties": {
                "ratio": {
                  "type": "number",
                  "description": "Risk/reward ratio (higher is better)"
                },
                "calculation": {
                  "type": "string",
                  "description": "Method used to calculate R/R"
                }
              }
            },
            "execution_priority": {
              "type": "object",
              "properties": {
                "rank": {
                  "type": "number",
                  "description": "Priority rank (1 is highest)"
                },
                "reason": {
                  "type": "string",
                  "description": "Reason for this priority ranking"
                }
              }
            },
            "order_suggestion": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["market", "limit", "stop", "stop limit", "trailing stop"],
                  "description": "Suggested order type for TOS execution"
                },
                "price": {
                  "type": ["number", "null"],
                  "description": "Suggested limit price if applicable"
                },
                "stop_trigger": {
                  "type": ["number", "null"],
                  "description": "Suggested stop trigger price if applicable"
                },
                "notes": {
                  "type": "string",
                  "description": "Additional order execution notes"
                }
              }
            },
            "timing_details": {
              "type": "object",
              "properties": {
                "optimal_entry_window": {
                  "type": "string",
                  "description": "Best time period for entry"
                },
                "setup_duration": {
                  "type": "string",
                  "description": "Expected duration of the setup"
                },
                "expiration": {
                  "type": "string",
                  "description": "When to abandon the setup if not triggered"
                }
              }
            }
          }
        }
      },
      "MARKET_BIAS": {
        "type": "object",
        "properties": {
          "overall": {
            "type": "string",
            "enum": ["BULLISH", "BEARISH", "NEUTRAL", "CAUTIOUS", "MIXED"],
            "description": "Overall market bias"
          },
          "key_levels": {
            "type": "object",
            "properties": {
              "SPX": {
                "type": "array",
                "items": { "type": "number" }
              },
              "QQQ": {
                "type": "array",
                "items": { "type": "number" }
              },
              "SPY": {
                "type": "array",
                "items": { "type": "number" }
              },
              "VIX": {
                "type": "array",
                "items": { "type": "number" }
              }
            }
          },
          "catalysts": {
            "type": "array",
            "items": { "type": "string" }
          },
          "focus_sectors": {
            "type": "array",
            "items": { "type": "string" }
          },
          "market_regime": {
            "type": "string",
            "enum": ["trending", "range_bound", "volatile", "low_volatility"],
            "description": "Current market regime"
          },
          "volume_profile": {
            "type": "string",
            "enum": ["above_average", "average", "below_average"],
            "description": "Current volume profile"
          },
          "notes": {
            "type": "string",
            "description": "Additional notes about market context"
          }
        }
      },
      "COACHING_INSIGHTS": {
        "type": "object",
        "properties": {
          "risk_management": {
            "type": "array",
            "items": { "type": "string" }
          },
          "timing_advice": {
            "type": "array",
            "items": { "type": "string" }
          },
          "market_condition_warnings": {
            "type": "array",
            "items": { "type": "string" }
          },
          "direct_quotes": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      }
    }
  }